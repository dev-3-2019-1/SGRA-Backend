<!DOCTYPE html>
<html>
  <head>
    <title>Manter Requisito Legal</title>
    <% include ./base/head %>
  </head>
  <body>
    <% include ./base/nav %>
    <% include ./base/scripts %>
    <h1><%= title %></h1>
    <form id="formAddRequirement" name="addrequirement" method="post" action="<%= action %>">
      <input type="hidden" value="<%= requirement._id %>" name="_id" />
      <p>Nome do Requisito</p>
      <input id="inputRequirementName" type="text" placeholder="" name="requirementname" value="<%= requirement.requirementname %>" />
      <p>Descrição</p>
      <input id="inputRequirementDescription" type="text" placeholder="" name="requirementdescription" value="<%= requirement.requirementdescription %>" />
      <p>Projeto Relacionado</p>

      <% if (projectlist && projectlist.length) { %>
        <select name="project" >
          <% projectlist.forEach((item) => { %>
            <option value="<%= item._id %>" <%= requirement.project && (requirement.project == item._id) ? 'selected' : '' %> ><%= item.projectname %></option>
          <% }) %>
        </select>
      <% } %>
      
      <p>Status</p>
      <select name="status" >
        <option value="OPEN" <%= requirement.status && (requirement.status === 'OPEN') ? 'selected' : '' %> >Aberto</option>
        <option value="PENDING" <%= requirement.status && (requirement.status === 'PENDING') ? 'selected' : '' %> >Pendente</option>
        <option value="SOLVED" <%= requirement.status && (requirement.status === 'SOLVED') ? 'selected' : '' %> >Resolvido</option>
      </select>

      <p>Prioridade</p>
      <select name="priority" >
        <option value="1" <%= requirement.priority && (requirement.priority === '1') ? 'selected' : '' %> >1</option>
        <option value="2" <%= requirement.priority && (requirement.priority === '2') ? 'selected' : '' %> >2</option>
        <option value="3" <%= requirement.priority && (requirement.priority === '3') ? 'selected' : '' %> >3</option>
      </select>

      <p>Data de Resolução</p>
      <input id="inputSolveDate" type="date" placeholder="" name="solvedate" value="<%= requirement.solvedate %>" />

      <p>Usuário Responsável</p>
      <% if (userlist && userlist.length) { %>
        <select name="responsibleuser" >
          <% userlist.forEach((item) => { %>
            <option value="<%= item._id %>" <%= requirement.responsibleuser && (requirement.responsibleuser == item._id) ? 'selected' : '' %> ><%= item.username %></option>
          <% }) %>
        </select>
      <% } %>

      <p></p>
      <button id="btnSubmit" type="submit">Salvar</button>
    </form>
    <% include ./base/footer %>
  </body>
</html>